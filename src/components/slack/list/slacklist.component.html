<div *ngIf="showForm" class="message-form">
    <ss-messageform
        [channelName]="submitContext.channelName"
        [channelID]="submitContext.channelID"
        [teamID]="submitContext.teamID"
        (submit)="submitForm($event)"
        (close)="closeForm()"
    >
    </ss-messageform>
</div>

<table class="table table-striped">
    <tr *ngFor="let info of messages">
        <td>
            <img class="user-thumbnail" [src]="info.message.userThumbnail"/>
        </td>

        <td>
            <div class="header">
                <img *ngIf="info.message.teamHasThumbnail" class="team-thumbnail" [src]="info.message.teamThumbnail"/>
                <span *ngIf="!info.message.teamHasThumbnail" [title]="info.message.teamName">
                    [{{info.message.shortTeamName}}]
                </span>
                <span class="user-name">{{info.message.userName}}</span>
                <ss-channelname [channelName]="info.message.channelName" [channelID]="info.message.channelID" [teamID]="info.message.teamID"></ss-channelname>
                <span *ngIf="showTeamName" class="team-name">({{info.message.teamName}})</span>
                <span class="timestamp">{{info.message.ts | ts2time}}</span>
            </div>

            <div class="contents">
                <span [innerHTML]="info.text | safeHtml"></span>
                <span *ngIf="info.edited" class="edit-mark"> (edited)</span>
            </div>

            <div class="buttons">
                <span class="glyphicon glyphicon-remove message-button icon-button" (click)="onClickDelete(info)"></span>
                <span class="glyphicon glyphicon-pencil message-button icon-button" (click)="onClickWrite(info)"></span>
            </div>

            <div *ngIf="info.doesReactionExist" class="reactions">
                <span *ngFor="let reaction of info.reactions" class="reaction">
                    <span [innerHTML]="reaction.reaction"></span>
                    <span>{{reaction.count}}</span>
                </span>
            </div>

            <div *ngFor="let attachment of info.attachments">
                <ss-attachment [attachment]="attachment" [parser]="info.parser" [dataStore]="info.message.rawDataStore" ></ss-attachment>
            </div>
        </td>
    </tr>

</table>
